  useEffect(() => {
    const checkUserSession = () => {
      const loggedInUser = localStorage.getItem("user");
      if (loggedInUser) {
        const { data, expiryTime } = JSON.parse(loggedInUser);
        const currentTime = new Date().getTime();

        if (currentTime < expiryTime) {
          setLoggedUser(data);
          setLoggedIn(true);
        } else {
          localStorage.removeItem("user");
        }
      }
    };

    checkUserSession();

    const intervalId = setInterval(() => {
      checkUserSession();
    }, 1000);

    return () => clearInterval(intervalId);
  }, [setLoggedIn, setLoggedUser]);